<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Painel de Processos</title>
  <link rel="icon" href="img/bras√£o.png" />
  <meta property="og:title" content="Sistemas Utilit√°rios" />
  <meta property="og:url" content="https://emersubraga.github.io/sistemas-utilitarios/" />
  <meta property="og:image" content="https://emersubraga.github.io/sistemas-utilitarios/img/logo-preto.png" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0072CE, #29ABE2);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .container-box {
      background: #fff;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      max-width: 1200px;
      width: 95%;
      margin: 30px auto;
    }

    .logo {
      margin-bottom: 15px;
    }

    h1 { 
      font-size: 1.6rem;
      margin-bottom: 5px;
      color: #F36A21;
    } 

    h2 { 
      font-size: 1rem;
      font-weight: 400;
      margin-bottom: 30px;
      color: #002b5c;
    }

    /* Kanban */
    .kanban-board {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      padding: 20px;
      gap: 20px;
    }
    .column {
      flex: 1 1 300px;
      max-width: 33%;
      border-radius: 12px;
      padding: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      min-width: 280px;
      background: #f9f9f9;
    }
    .column h3 {
      text-align: center;
      color: #0072CE;
    }
    .card {
      padding: 10px;
      margin: 10px 0;
      border-radius: 8px;
      cursor: grab;
      position: relative;
      background: #fff;
      border: 1px solid #ddd;

      /* transi√ß√£o suave para o movimento */
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    /* efeito ao passar o mouse */
    .card:hover {
      transform: translateY(-4px); /* levanta o card */
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
    }

    .remove-btn {
      position: absolute;
      top: 6px;
      right: 8px;
      background: transparent;
      border: none;
      font-size: 18px;
      cursor: pointer;
      color: #e74c3c;   /* vermelho */

      /* transi√ß√£o para suavizar */
      transition: transform 0.15s ease, color 0.15s ease;
    }

    .remove-btn:hover {
      transform: scale(1.2);
      color: #c0392b;   /* vermelho mais escuro ao passar o mouse */
    }


    footer {
      text-align: center;
      padding: 15px;
      font-size: 0.8rem;
      color: #777;
    }
  </style>
</head>
<body>
  <div class="container-box">
    <div class="text-center">
      <img src="img/bras√£o.png" alt="Prefeitura" class="logo" width="120">
      <h1>Prefeitura de Cara√∫bas</h1>
      <h2>Departamento de Compras</h2>
      <h3 style="color:#0072CE; margin-top:10px;">Acompanhamento de Processos Licitat√≥rios</h3>
    </div>

    <!-- Formul√°rio -->
    <div id="formulario" class="container">
  <div class="row g-3">
    <div class="col-12 col-md-6 col-lg">
      <input type="text" id="numero" placeholder="N√∫mero do Processo" class="form-control" />
    </div>
    <div class="col-12 col-md-6 col-lg">
      <input type="text" id="descricao" placeholder="Descri√ß√£o do Processo" class="form-control" />
    </div>
    <div class="col-12 col-md-6 col-lg">
      <select id="tipo" class="form-select">
        <option value="">Selecione o Tipo</option>
        <option value="Preg√£o">Preg√£o</option>
        <option value="Dispensa">Dispensa</option>
        <option value="Inexigibilidade">Inexigibilidade</option>
        <option value="Ades√£o">Ades√£o</option>
        <option value="Concorr√™ncia">Concorr√™ncia</option>
      </select>
    </div>
    <div class="col-12 col-md-6 col-lg">
      <input type="text" id="protocolo" placeholder="N√∫mero do Protocolo" class="form-control" />
    </div>
    <div class="col-12 col-md-4 col-lg-2">
      <button onclick="adicionarProcesso()" class="btn btn-primary w-100">Cadastrar</button>
    </div>
  </div>

  <div class="row mt-3">
    <div class="col-12">
      <label for="secretarias" class="form-label">Secretarias Participantes</label>
      <div style="height: 120px; overflow-y: auto; border: 1px solid #ccc; border-radius: 5px; padding: 10px;">
        <div class="row g-2">
          <div class="col-6 col-md-4">
            <!-- 1¬™ coluna -->
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="Administra√ß√£o" id="secAdministra√ß√£o">
              <label class="form-check-label" for="secAdministra√ß√£o">Administra√ß√£o</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="Educa√ß√£o" id="secEduca√ß√£o">
              <label class="form-check-label" for="secEduca√ß√£o">Educa√ß√£o</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="Sa√∫de" id="secSa√∫de">
              <label class="form-check-label" for="secSa√∫de">Sa√∫de</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="Assist√™ncia Social" id="secAssist√™ncia">
              <label class="form-check-label" for="secAssist√™ncia">Assist√™ncia Social</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="Governo" id="secGoverno">
              <label class="form-check-label" for="secGoverno">Governo</label>
            </div>
          </div>
          <div class="col-6 col-md-4">
            <!-- 2¬™ coluna -->
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="Controladoria" id="secControladoria">
              <label class="form-check-label" for="secControladoria">Controladoria</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="Procuradoria" id="secProcuradoria">
              <label class="form-check-label" for="secProcuradoria">Procuradoria</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="Transportes" id="secTransportes">
              <label class="form-check-label" for="secTransportes">Transportes</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="Infraestrutura" id="secInfraestrutura">
              <label class="form-check-label" for="secInfraestrutura">Infraestrutura</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="Pol√≠ticas do Campo" id="secCampo">
              <label class="form-check-label" for="secCampo">Pol√≠ticas do Campo</label>
            </div>
          </div>
          <div class="col-6 col-md-4">
            <!-- 3¬™ coluna -->
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="Receita" id="secReceita">
              <label class="form-check-label" for="secReceita">Receita</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="Finan√ßas" id="secFinan√ßas">
              <label class="form-check-label" for="secFinan√ßas">Finan√ßas</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="Planejamento" id="secPlanejamento">
              <label class="form-check-label" for="secPlanejamento">Planejamento</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="Cultura" id="secCultura">
              <label class="form-check-label" for="secCultura">Cultura</label>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-3">
    <div class="col-12 col-md-6 offset-md-3">
      <input type="text" id="filtro" oninput="filtrarProcessos()" placeholder="Filtrar por n√∫mero, tipo ou descri√ß√£o..." class="form-control">
    </div>
  </div>
</div>


  <div class="kanban-board">
    <div class="column" id="compra" ondrop="drop(event)" ondragover="allowDrop(event)">
      <h3>Compras üõí</h3>
    </div>
    <div class="column" id="licitacao" ondrop="drop(event)" ondragover="allowDrop(event)">
      <h3>Licita√ß√£o üìÑ</h3>
    </div>
    <div class="column" id="finalizado" ondrop="drop(event)" ondragover="allowDrop(event)">
      <h3>Finalizado ‚úÖ</h3>
    </div>
  </div>

<!-- Modal para Atualizar Etapa (Melhorado) -->
<div class="modal fade" id="etapaModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content shadow">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">üîÅ Atualizar Etapa</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <label for="etapaSelect" class="form-label">Selecione a nova etapa:</label>
        <select id="etapaSelect" class="form-select"></select>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-success" onclick="salvarEtapa()">Salvar Altera√ß√µes</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Recebimento de DFDs (Melhorado) -->
<div class="modal fade" id="dfdModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content shadow">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">üì© Recebimento de DFDs</h5>
        <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <p class="mb-2">Marque as secretarias que j√° entregaram o DFD:</p>
        <div id="dfdCheckboxes" class="row g-2">
          <!-- checkboxes renderizados via JS -->
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button class="btn btn-primary" onclick="salvarDFDs()">Salvar</button>
      </div>
    </div>
  </div>
</div>


  <!-- Modal de Hist√≥rico com Estilo Melhorado -->
<div class="modal fade" id="logModal" tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content shadow">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">üìú Hist√≥rico do Processo</h5>
        <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <pre id="logConteudo" style="white-space: pre-wrap; background-color: #f9f9f9; padding: 15px; border-radius: 5px; font-size: 14px; line-height: 1.5;"></pre>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Edi√ß√£o com Estilo Melhorado -->
<div class="modal fade" id="modalEdicao" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content shadow">
      <div class="modal-header bg-warning text-dark">
        <h5 class="modal-title">‚úèÔ∏è Editar Dados do Processo</h5>
        <button class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label for="editNumero" class="form-label">N√∫mero do Processo</label>
          <input type="text" id="editNumero" class="form-control" placeholder="Ex: 2025/00123">
        </div>
        <div class="mb-2">
          <label for="editProtocolo" class="form-label">N√∫mero do Protocolo</label>
          <input type="text" id="editProtocolo" class="form-control" placeholder="Ex: 98765">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button class="btn btn-success" onclick="salvarEdicao()">Salvar Altera√ß√µes</button>
      </div>
    </div>
  </div>
</div>

    <footer>
      ¬© 2025 - Design e C√≥digo por Emerson Braga.
    </footer>
  </div>

  <!-- Scripts Firebase + Bootstrap -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyA7CMtNAmd4AJiCyho5O0JZSSNFhP1iM_U",
    authDomain: "controle-ordens-e461e.firebaseapp.com",
    databaseURL: "https://controle-ordens-e461e-default-rtdb.firebaseio.com",
    projectId: "controle-ordens-e461e",
    storageBucket: "controle-ordens-e461e.firebasestorage.app",
    messagingSenderId: "843214621145",
    appId: "1:843214621145:web:4d0f5748172b7ba242f1c8",
    measurementId: "G-S88RXTLRRL"
  };
  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
  }

  firebase.auth().onAuthStateChanged(user => {
    const logado = !!user;
    document.getElementById('formulario').style.display = logado ? 'block' : 'none';
    window.usuarioLogado = logado;
  });
</script>
<script src="js/processos.js"></script>
</body>
</html>

